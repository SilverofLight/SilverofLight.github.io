---
layout: post
title: 使用 mpv 观看 b 站视频
date: 2025-08-10
author: SL
header-img: img/home-bg.jpg
catalog: true
tags:
  - python
  - linux
  - mpv
  - bilibili
---

# 引言

在获取一个 b 站视频链接之后，直接使用 `mpv <url>` 即可使用 mpv 打开该视频，但是我觉得这太麻烦了，我首先需要先打开感兴趣的视频，复制链接，打开终端输入命令，最后还需要等待 b 站加载完毕之后暂停原视频。

我需要的是，在 b 站点击一个按钮，一键暂停视频，并将当前 url 发送给我的 mpv ，直接打开视频。

# 思路

使用油猴脚本，提取当前 url ，同时在本地运行一个服务，监听油本地的一个端口，当油猴脚本将 url 发送到这个端口之后，使用 mpv 打开链接。

同时，如果我已经复制了一个 b 站视频的 url 或 BV 号，这可能是其他人发送给我的，我可以通过一个快捷键从我的剪切板获取这个 url 或 BV 号，使用 mpv 打开。

# 代码

## 油猴脚本：

[链接](https://5dzigihq.pinit.eth.limo)

将这个脚本粘贴到油猴中，启用之后会在 b 站视频页面右下角显示两个控件：“复制 BV 号”和“使用 mpv 打开”，前者可以复制 BV 号到剪切板，后者需要在本地开启服务之后才能使用，会暂停当前视频并使用 mpv 打开视频。端口：15612

## 本地服务：

[链接](https://jjuimgkq.pinit.eth.limo)

监控 15612 端口，可以设置为开机自启动。

## 快捷键：

[链接](https://2nty7t7e.pinit.eth.limo)

可以获取剪切版中的链接或 BV ，使用 mpv 打开，设置一个快捷键为运行这个脚本即可。

# 附加：mpv 显示 b 站弹幕

github 链接：https://github.com/UlyssesZh/bdanmaku
